<div data-role="page" data-theme="b">

  <div data-role="header" data-position="inline">
    <h1>Bluetooth機能</h1>
    <a href="<%= Rho::RhoConfig.start_path %>" class="ui-btn-left" data-icon="home" data-direction="reverse" <%= "data-ajax='false'" if is_bb6 %>>
      機能リストへ
    </a>
  </div>

  <div data-role="content">
    <% if @available == 1 %>
      <a href="<%= url_for :action => :off %>" data-role="button">Bluetoothをオフにする</a>
    <% end %>
    <% @available == 1  ? available = '利用可能です' : available = '利用できません' %>

    <div data-role="fieldcontain">
      <label for="available">Bluetooth機能:</label>
      <input type="text" name="available" id="available" value="<%= available %>"  />
    </div>

    <form method="GET" action="<%= url_for :action => :set_name %>">
      <div data-role="fieldcontain">
        <label for="name">端末名:</label>
        <input type="text" name="name" id="name" value="<%= @device_name %>"  />
      </div>
      <input type="submit" value="端末名変更" />
    </form>

    <div data-role="collapsible">
      <h2>接続</h2>
      <div class="ui-grid-a">
        <a href="<%= url_for :action => :create_server_session %>" data-role="button">この端末を公開する</a>
        <a href="<%= url_for :action => :create_client_session %>" data-role="button">他の端末に接続する</a>
      </div>
    </div>

    <div data-role="collapsible">
      <h2>接続(UIなし)</h2>
      <div class="ui-grid-a">
        <a href="javascript:void" onClick="Server_Wait();" data-role="button">この端末を公開する</a>
        <label for="name">端末名:</label>
        <input type="text" name="server_name" id="server_name" />
        <input type="button" value="このデバイスに接続" name="server_name" onClick="Connect();">
      </div>
    </div>

    <div data-role="fieldcontain">
      <label for="name">接続先名:</label>
      <input type="text" name="device_name" id="device_name" value="<%= $status %>" readonly />
    </div>

    <div data-role="fieldcontain">
      <label for="name">やりとり:</label>
      <textarea name="chat" id="chat" style="height:250px" readonly ></textarea>
    </div>

    <div data-role="fieldcontain">
      <label for="name">メッセージ:</label>
      <input type="text" name="message" id="message" />
      <input type="button" value="送信" name="send_button" onClick="Send();">
    </div>

    <a href="javascript:void" onClick="Disconnect();" data-role="button">接続終了</a>
  </div>
</div>
